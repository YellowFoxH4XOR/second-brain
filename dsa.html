
<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comprehensive Advanced Algorithmic Topics</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js"></script>

    <style>
        :root {
            --primary: #1e3a5f;
            --secondary: #2d5a87;
            --accent: #4a90a4;
            --neutral: #f8fafc;
            --base: #ffffff;
            --text: #1f2937;
            --muted: #6b7280;
            --border: #e5e7eb;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--text);
            background: var(--neutral);
            overflow-x: hidden;
        }
        
        .serif {
            font-family: 'Playfair Display', serif;
        }
        
        .hero-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto auto;
            gap: 1rem;
            height: 60vh;
        }
        
        .hero-main {
            grid-column: 1 / -1;
            grid-row: 1;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .hero-accent-1 {
            grid-column: 1;
            grid-row: 2;
            background: var(--accent);
            opacity: 0.9;
        }
        
        .hero-accent-2 {
            grid-column: 2;
            grid-row: 2;
            background: var(--secondary);
            opacity: 0.8;
        }
        
        .toc {
            position: fixed;
            left: 0;
            top: 0;
            width: 300px;
            height: 100vh;
            background: var(--base);
            border-right: 1px solid var(--border);
            padding: 2rem 1.5rem;
            overflow-y: auto;
            z-index: 1000;
        }
        
        .main-content {
            margin-left: 300px;
            padding: 0;
        }
        
        .section-header {
            border-left: 4px solid var(--accent);
            padding-left: 1.5rem;
            margin: 3rem 0 2rem 0;
        }
        
        .toc-link {
            display: block;
            padding: 0.5rem 0;
            color: var(--muted);
            text-decoration: none;
            border-left: 2px solid transparent;
            padding-left: 1rem;
            transition: all 0.3s ease;
        }
        
        .toc-link:hover, .toc-link.active {
            color: var(--primary);
            border-left-color: var(--accent);
            background: rgba(74, 144, 164, 0.05);
        }
        
        .toc-link.sub {
            padding-left: 2rem;
            font-size: 0.9rem;
        }
        
        .citation {
            color: var(--accent);
            text-decoration: none;
            font-weight: 500;
            cursor: pointer;
        }
        
        .citation:hover {
            text-decoration: underline;
        }
        
        .algorithm-card {
            background: var(--base);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin: 1.5rem 0;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .complexity-badge {
            display: inline-block;
            background: var(--accent);
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.875rem;
            font-weight: 500;
            margin: 0.25rem;
        }
        
        .mermaid-container {
            display: flex;
            justify-content: center;
            min-height: 300px;
            max-height: 800px;
            background: var(--base);
            border: 2px solid var(--border);
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.08);
            position: relative;
            overflow: hidden;
        }

        .mermaid-container .mermaid {
            width: 100%;
            max-width: 100%;
            height: 100%;
            cursor: grab;
            transition: transform 0.3s ease;
            transform-origin: center center;
            display: flex;
            justify-content: center;
            align-items: center;
            touch-action: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        .mermaid-container .mermaid svg {
            max-width: 100%;
            height: 100%;
            display: block;
            margin: 0 auto;
        }

        .mermaid-container .mermaid:active {
            cursor: grabbing;
        }

        .mermaid-container.zoomed .mermaid {
            height: 100%;
            width: 100%;
            cursor: grab;
        }

        .mermaid-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            display: flex;
            gap: 10px;
            z-index: 20;
            background: rgba(255, 255, 255, 0.95);
            padding: 8px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .mermaid-control-btn {
            background: #ffffff;
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #374151;
            font-size: 14px;
            min-width: 36px;
            height: 36px;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .mermaid-control-btn:hover {
            background: #f8fafc;
            border-color: var(--accent);
            color: var(--accent);
            transform: translateY(-1px);
        }

        .mermaid-control-btn:active {
            transform: scale(0.95);
        }

        .pullquote {
            font-size: 1.25rem;
            font-style: italic;
            color: var(--primary);
            border-left: 4px solid var(--accent);
            padding-left: 1.5rem;
            margin: 2rem 0;
            background: rgba(74, 144, 164, 0.05);
            padding: 1.5rem;
            border-radius: 0.5rem;
        }
        
        @media (max-width: 1024px) {
            .mermaid-control-btn:not(.reset-zoom) {
                display: none;
            }
            .mermaid-controls {
                top: auto;
                bottom: 15px;
                right: 15px;
            }
        }

        @media (max-width: 768px) {
            .toc {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .toc.open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }

            .hero-grid {
                grid-template-columns: 1fr;
                height: auto;
            }

            .hero-accent-1, .hero-accent-2 {
                grid-column: 1;
            }

            .hero-main h1 {
                font-size: 2.5rem;
                line-height: 1.2;
            }

            .hero-main p {
                font-size: 1rem;
            }

            .toc-overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0,0,0,0.5);
                z-index: 999;
                display: none;
            }
            
            .toc-overlay.active {
                display: block;
            }

            .toc-toggle {
                display: block;
                position: fixed;
                top: 1rem;
                left: 1rem;
                z-index: 1001;
                background: var(--accent);
                color: white;
                border: none;
                border-radius: 0.25rem;
                padding: 0.5rem 1rem;
                cursor: pointer;
                font-weight: 600;
            }
        }

        @media (min-width: 769px) {
            .toc-toggle, .toc-overlay {
                display: none;
            }
        }
        
        @media (max-width: 1024px) {
            .mermaid-container {
                padding: 15px;
            }
        }

        @media (max-width: 768px) {
            .mermaid-container {
                padding: 15px;
            }
        }

        .mermaid-title {
            text-align: center;
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.125rem;
        }

        .bento-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0.75rem;
            padding: 1.5rem;
            color: white;
        }
        
        .expandable {
            background: var(--base);
            border: 1px solid var(--border);
            border-radius: 0.5rem;
            margin: 1rem 0;
            overflow: hidden;
        }
        
        .expandable-header {
            padding: 1rem 1.5rem;
            background: rgba(74, 144, 164, 0.05);
            cursor: pointer;
            display: flex;
            justify-content: between;
            align-items: center;
        }
        
        .expandable-content {
            padding: 0 1.5rem;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease, padding 0.3s ease;
        }
        
        .expandable-content.expanded {
            max-height: 1000px;
            padding: 1.5rem;
        }
        
        /* Mermaid diagram styling */
        .mermaid .node rect,
        .mermaid .node circle,
        .mermaid .node ellipse,
        .mermaid .node polygon {
            stroke-width: 2px;
        }
        
        .mermaid .edgePath .path {
            stroke-width: 2px;
        }
        
        .mermaid .edgeLabel {
            background-color: var(--base);
            border-radius: 4px;
            padding: 2px 6px;
        }
    </style>
  </head>

  <body>
    <!-- Table of Contents -->
    <nav class="toc">
      <div class="mb-6">
        <h3 class="text-lg font-bold text-gray-900 mb-2">Table of Contents</h3>
      </div>
      <div class="space-y-1">
        <a href="#hero" class="toc-link">Overview</a>
        <a href="#foundations" class="toc-link">1. Foundational Techniques</a>
        <a href="#brute-force" class="toc-link sub">1.1 Brute Force</a>
        <a href="#recursion" class="toc-link sub">1.2 Recursion</a>
        <a href="#iteration" class="toc-link sub">1.3 Iteration</a>
        <a href="#paradigms" class="toc-link">2. Core Algorithmic Paradigms</a>
        <a href="#divide-conquer" class="toc-link sub">2.1 Divide and Conquer</a>
        <a href="#greedy" class="toc-link sub">2.2 Greedy Algorithms</a>
        <a href="#dynamic-programming" class="toc-link sub">2.3 Dynamic Programming</a>
        <a href="#backtracking" class="toc-link sub">2.4 Backtracking</a>
        <a href="#graphs" class="toc-link">3. Graph Algorithms</a>
        <a href="#graph-traversal" class="toc-link sub">3.1 Graph Traversal</a>
        <a href="#shortest-path" class="toc-link sub">3.2 Shortest Path</a>
        <a href="#mst" class="toc-link sub">3.3 Minimum Spanning Tree</a>
        <a href="#topological-sort" class="toc-link sub">3.4 Topological Sort</a>
        <a href="#arrays" class="toc-link">4. Array & String Techniques</a>
        <a href="#two-pointers" class="toc-link sub">4.1 Two Pointers</a>
        <a href="#sliding-window" class="toc-link sub">4.2 Sliding Window</a>
        <a href="#prefix-sums" class="toc-link sub">4.3 Prefix/Suffix Sums</a>
        <a href="#kadane" class="toc-link sub">4.4 Kadane's Algorithm</a>
        <a href="#monotonic" class="toc-link sub">4.5 Monotonic Stack/Queue</a>
        <a href="#rolling-hash" class="toc-link sub">4.6 Rolling Hash</a>
        <a href="#string-matching" class="toc-link sub">4.7 String Matching</a>
        <a href="#advanced" class="toc-link">5. Advanced Data Structures</a>
        <a href="#amortized" class="toc-link sub">5.1 Amortized Analysis</a>
        <a href="#fibonacci-heap" class="toc-link sub">5.2 Fibonacci Heaps</a>
        <a href="#splay-trees" class="toc-link sub">5.3 Splay Trees</a>
        <a href="#fenwick" class="toc-link sub">5.4 Fenwick Trees</a>
        <a href="#segment-trees" class="toc-link sub">5.5 Segment Trees</a>
        <a href="#techniques" class="toc-link">6. Advanced Techniques</a>
        <a href="#approximation" class="toc-link sub">6.1 Approximation Algorithms</a>
        <a href="#randomized" class="toc-link sub">6.2 Randomized Algorithms</a>
        <a href="#network-flow" class="toc-link sub">6.3 Network Flow</a>
        <a href="#mathematical" class="toc-link sub">6.4 Mathematical Algorithms</a>
        <a href="#computational-geometry" class="toc-link sub">6.5 Computational Geometry</a>
        <a href="#advanced-dp" class="toc-link sub">6.6 Advanced DP</a>
        <a href="#mos-algorithm" class="toc-link sub">6.7 Mo's Algorithm</a>
      </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Hero Section -->
      <section id="hero" class="relative">
        <div class="hero-grid">
          <div class="hero-main flex items-center justify-center">
            <div class="text-center text-white px-8">
              <h1 class="serif text-5xl font-bold mb-4 italic">
                Comprehensive Advanced
                <br>
                <span class="text-blue-200">Algorithmic Topics</span>
              </h1>
              <p class="text-xl text-blue-100 max-w-2xl mx-auto leading-relaxed">
                A deep exploration of sophisticated algorithms, from foundational brute force to advanced computational geometry
              </p>
            </div>
            <div class="absolute inset-0 bg-gradient-to-br from-blue-900/20 to-teal-900/20"></div>
          </div>
          <div class="hero-accent-1 flex items-center justify-center">
            <div class="bento-card">
              <i class="fas fa-network-wired text-3xl mb-3"></i>
              <h3 class="font-semibold mb-2">Graph Algorithms</h3>
              <p class="text-sm opacity-90">Traversal, shortest path, and network flow optimization</p>
            </div>
          </div>
          <div class="hero-accent-2 flex items-center justify-center">
            <div class="bento-card">
              <i class="fas fa-cubes text-3xl mb-3"></i>
              <h3 class="font-semibold mb-2">Data Structures</h3>
              <p class="text-sm opacity-90">Advanced trees, heaps, and amortized analysis</p>
            </div>
          </div>
        </div>
      </section>

      <!-- Content Sections -->
      <div class="max-w-5xl mx-auto px-8 py-12">

        <!-- Foundations Section -->
        <section id="foundations">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">1. Foundational Techniques & Brute Force</h2>
            <p class="text-gray-600">The building blocks of algorithmic problem-solving</p>
          </div>

          <div id="brute-force" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">1.1 Brute Force</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Brute force algorithms represent the most straightforward approach to problem-solving. They involve systematically enumerating all possible candidates for a solution and checking each candidate to determine if it satisfies the problem's statement. While often inefficient for large problem sizes due to their potentially exponential time complexity, brute force methods are valuable for several reasons.
            </p>

            <div class="pullquote">
              "Brute force algorithms are simple to conceptualize and implement, providing a clear baseline solution that guarantees finding a correct solution if one exists."
            </div>

            <p class="text-gray-700 leading-relaxed mb-4">
              They guarantee finding a correct solution if one exists, making them useful for verifying the correctness of more optimized algorithms on small instances. In some cases, particularly when the problem size is small or when the search space is inherently limited, a brute force solution might be perfectly acceptable or even the most practical choice.
            </p>

            <div class="expandable">
              <div class="expandable-header" onclick="toggleExpand(this)">
                <span class="font-semibold">Examples & Applications</span>
                <i class="fas fa-chevron-down transition-transform"></i>
              </div>
              <div class="expandable-content">
                <ul class="list-disc list-inside space-y-2 text-gray-700">
                  <li>Finding the maximum element in an unsorted array by checking each element</li>
                  <li>Trying all permutations for the Traveling Salesman Problem (TSP)</li>
                  <li>Checking all subsets for the Knapsack problem</li>
                  <li>Password cracking through exhaustive search</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="recursion" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">1.2 Recursion</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Recursion is a fundamental programming and algorithmic technique where a function solves a problem by calling itself on smaller instances of the same problem. It is a powerful paradigm that mirrors mathematical induction and is particularly well-suited for problems that exhibit a <strong>self-similar structure</strong>.
            </p>

            <div class="bg-gray-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold mb-2">Key Components:</h4>
              <ul class="list-disc list-inside space-y-1 text-gray-700">
                <li><strong>Base Case:</strong> The smallest, simplest instance of the problem that can be solved directly</li>
                <li><strong>Recursive Case:</strong> Breaks down a larger problem into smaller subproblems</li>
              </ul>
            </div>

            <p class="text-gray-700 leading-relaxed mb-4">
              Recursion is the conceptual basis for many advanced algorithmic paradigms, including <strong>divide and conquer</strong>, <strong>dynamic programming</strong> (when combined with memoization), and <strong>backtracking</strong>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Classic Examples</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Computing factorials</li>
                  <li>• Calculating Fibonacci numbers</li>
                  <li>• Tree traversals</li>
                  <li>• Tower of Hanoi puzzle</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Advanced Applications</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Merge Sort and Quick Sort</li>
                  <li>• Graph traversal (DFS)</li>
                  <li>• Backtracking algorithms</li>
                  <li>• Dynamic programming</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="iteration" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">1.3 Iteration</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Iteration is a control flow mechanism that allows a block of code to be executed repeatedly based on a loop condition. It is a cornerstone of algorithmic design, often serving as an alternative or complement to recursion.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div>
                <h4 class="font-semibold mb-2">Iteration vs. Recursion</h4>
                <p class="text-gray-700 text-sm leading-relaxed">
                  While recursion relies on function calls and the call stack, iteration uses loop constructs like
                  <code class="bg-gray-100 px-1 rounded">for</code>,
                  <code class="bg-gray-100 px-1 rounded">while</code>, and
                  <code class="bg-gray-100 px-1 rounded">do-while</code>.
                </p>
              </div>
              <div>
                <h4 class="font-semibold mb-2">Performance Considerations</h4>
                <p class="text-gray-700 text-sm leading-relaxed">
                  Iterative solutions can be more space-efficient than recursive ones, as they avoid the overhead of multiple function calls and stack frames.
                </p>
              </div>
            </div>
          </div>
        </section>

        <!-- Core Paradigms Section -->
        <section id="paradigms">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">2. Core Algorithmic Paradigms</h2>
            <p class="text-gray-600">High-level strategies for designing efficient algorithms</p>
          </div>

          <div id="divide-conquer" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">2.1 Divide and Conquer</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              The <strong>Divide and Conquer</strong> paradigm solves a problem by recursively breaking it down into two or more subproblems of the same or related type, until these subproblems become simple enough to be solved directly. The solutions to the subproblems are then combined to give a solution to the original problem.
            </p>

            <div class="bg-blue-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-blue-900 mb-3">Three-Step Process:</h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                <div class="text-center">
                  <div class="w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-2">
                    <i class="fas fa-cut"></i>
                  </div>
                  <h5 class="font-semibold text-blue-900">Divide</h5>
                  <p class="text-sm text-blue-800">Split the problem into smaller subproblems</p>
                </div>
                <div class="text-center">
                  <div class="w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-2">
                    <i class="fas fa-cog"></i>
                  </div>
                  <h5 class="font-semibold text-blue-900">Conquer</h5>
                  <p class="text-sm text-blue-800">Solve the subproblems recursively</p>
                </div>
                <div class="text-center">
                  <div class="w-12 h-12 bg-blue-600 text-white rounded-full flex items-center justify-center mx-auto mb-2">
                    <i class="fas fa-puzzle-piece"></i>
                  </div>
                  <h5 class="font-semibold text-blue-900">Combine</h5>
                  <p class="text-sm text-blue-800">Merge solutions to form final answer</p>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Classic Algorithms</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li><strong>Merge Sort:</strong>
                    <span class="complexity-badge">O(n log n)</span>
                  </li>
                  <li><strong>Quick Sort:</strong>
                    <span class="complexity-badge">O(n log n)</span>
                  </li>
                  <li><strong>Binary Search:</strong>
                    <span class="complexity-badge">O(log n)</span>
                  </li>
                  <li><strong>Karatsuba Multiplication:</strong>
                    <span class="complexity-badge">O(n^1.585)</span>
                  </li>
                </ul>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Analysis Tool</h4>
                <p class="text-sm text-gray-700 mb-2">
                  The efficiency of Divide and Conquer algorithms is often analyzed using <strong>recurrence relations</strong>.
                </p>
                <p class="text-sm text-gray-700">
                  The <strong>Master Theorem</strong> provides a common tool for determining their time complexity, which frequently results in complexities like <strong>O(n log n)</strong> or <strong>O(log n)</strong>.
                </p>
              </div>
            </div>
          </div>

          <div id="greedy" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">2.2 Greedy Algorithms</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Greedy algorithms</strong> make a sequence of choices, where each choice is made to be <strong>locally optimal</strong> at that moment, with the hope that these local optima will lead to a <strong>globally optimal solution</strong>.
            </p>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="fas fa-exclamation-triangle text-yellow-400"></i>
                </div>
                <div class="ml-3">
                  <p class="text-sm text-yellow-700">
                    <strong>Important:</strong> Greedy algorithms do not always yield the globally optimal solution; their correctness must be proven for each specific problem.
                  </p>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">When to Use</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Problem exhibits <strong>greedy choice property</strong></li>
                  <li>• Problem has <strong>optimal substructure</strong></li>
                  <li>• Efficient running time is required</li>
                  <li>• Correctness can be proven</li>
                </ul>
              </div>
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Classic Examples</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Dijkstra's algorithm <span class="complexity-badge">O((V+E) log V)</span>
                  </li>
                  <li>• Kruskal's and Prim's MST algorithms</li>
                  <li>• Huffman coding</li>
                  <li>• Activity Selection problem</li>
                </ul>
              </div>
            </div>

            <div class="mermaid-title">Greedy Algorithm Decision Process</div>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                flowchart TD
                A["Problem Instance"] --> B{"Does problem have\noptimal substructure?"}
                B -->|"No"| C["Consider other paradigms"]
                B -->|"Yes"| D{"Does greedy choice\nproperty hold?"}
                D -->|"No"| C
                D -->|"Yes"| E["Design greedy algorithm"]
                E --> F["Prove correctness"]
                F --> G["Implement and test"]
              </div>
            </div>
          </div>

          <div id="dynamic-programming" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">2.3 Dynamic Programming (DP)</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Dynamic Programming (DP)</strong> solves complex problems by breaking them down into simpler, <strong>overlapping subproblems</strong>. The key idea is to solve each subproblem only once and store its solution, typically in a table or memoization array, so that if the same subproblem occurs again, its solution can be looked up rather than recomputed.
            </p>

            <div class="bg-purple-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-purple-900 mb-3">Two Essential Properties:</h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <h5 class="font-semibold text-purple-800 mb-1">1. Optimal Substructure</h5>
                  <p class="text-sm text-purple-700">An optimal solution to the problem can be constructed from optimal solutions of its subproblems.</p>
                </div>
                <div>
                  <h5 class="font-semibold text-purple-800 mb-1">2. Overlapping Subproblems</h5>
                  <p class="text-sm text-purple-700">The problem can be broken down into subproblems which are reused several times.</p>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Top-Down (Memoization)</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Recursive approach</li>
                  <li>• Solutions to subproblems are cached</li>
                  <li>• More intuitive implementation</li>
                  <li>• Can be less efficient due to recursion overhead</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Bottom-Up (Tabulation)</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Iterative approach</li>
                  <li>• Fills a table systematically</li>
                  <li>• Starts from smallest subproblems</li>
                  <li>• More space-efficient</li>
                </ul>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Classic DP Problems:</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold">0/1 Knapsack</div>
                <div class="complexity-badge text-xs">O(nW)</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold">Longest Common Subsequence</div>
                <div class="complexity-badge text-xs">O(mn)</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold">Edit Distance</div>
                <div class="complexity-badge text-xs">O(mn)</div>
              </div>
            </div>
          </div>

          <div id="backtracking" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">2.4 Backtracking</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Backtracking</strong> is a refined brute-force algorithmic technique that incrementally builds candidates for a solution and abandons a candidate ("backtracks") as soon as it determines that this partial candidate cannot possibly lead to a valid complete solution.
            </p>

            <div class="bg-red-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-red-900 mb-2">Key Characteristics:</h4>
              <ul class="text-red-800 space-y-1 text-sm">
                <li>• Essentially a depth-first search of the solution space</li>
                <li>• Prunes the search space by abandoning invalid partial solutions</li>
                <li>• More efficient than naive brute-force</li>
                <li>• Particularly useful for constraint satisfaction problems (CSPs)</li>
              </ul>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Famous Examples</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li><strong>N-Queens Problem:</strong> Placing N chess queens on an N×N chessboard</li>
                  <li><strong>Sudoku Solver:</strong> Filling a 9×9 grid with digits</li>
                  <li><strong>Generating Permutations/Subsets:</strong> Enumerating all possible arrangements</li>
                  <li><strong>Maze Solving:</strong> Finding a path through a maze</li>
                </ul>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Optimization Techniques</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Heuristics for variable ordering</li>
                  <li>• Constraint propagation</li>
                  <li>• Forward checking</li>
                  <li>• Arc consistency</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- Graph Algorithms Section -->
        <section id="graphs">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">3. Graph Algorithms</h2>
            <p class="text-gray-600">Techniques for solving problems modeled as networks and relationships</p>
          </div>

          <div id="graph-traversal" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">3.1 Graph Traversal</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Graph traversal algorithms</strong> systematically visit or explore all the vertices and edges of a graph. These algorithms form the basis for many other graph algorithms and are essential for understanding the structure and properties of graphs.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Breadth-First Search (BFS)</h4>
                <ul class="text-blue-800 space-y-1 text-sm mb-3">
                  <li>• Explores graph level by level</li>
                  <li>• Uses a queue data structure</li>
                  <li>• Finds shortest path in unweighted graphs</li>
                  <li>• Identifies connected components</li>
                </ul>
                <div class="complexity-badge">O(V + E)</div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Depth-First Search (DFS)</h4>
                <ul class="text-green-800 space-y-1 text-sm mb-3">
                  <li>• Explores as far as possible along each branch</li>
                  <li>• Uses a stack (recursively or iteratively)</li>
                  <li>• Detects cycles in graphs</li>
                  <li>• Performs topological sorting of DAGs</li>
                </ul>
                <div class="complexity-badge">O(V + E)</div>
              </div>
            </div>

            <div class="mermaid-title">Graph Traversal Comparison</div>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph LR
                A["Start Node"] --> B["BFS: Level 1"]
                A --> C["DFS: Path 1"]
                B --> D["BFS: Level 2"]
                B --> E["BFS: Level 2"]
                C --> F["DFS: Path 1.1"]
                C --> G["DFS: Path 1.2"]
                D --> H["BFS: Level 3"]
                E --> I["BFS: Level 3"]
                F --> J["DFS: Path 1.1.1"]
              </div>
            </div>
          </div>

          <div id="shortest-path" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">3.2 Shortest Path Algorithms</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Shortest path algorithms</strong> find the path between two vertices in a graph such that the sum of the weights of its constituent edges is minimized.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Dijkstra's Algorithm</h4>
                <p class="text-blue-800 text-sm mb-2">Single-source shortest paths with non-negative weights</p>
                <div class="complexity-badge text-xs">O((V+E) log V)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Uses priority queue</li>
                  <li>• Greedy approach</li>
                  <li>• Optimal for sparse graphs</li>
                </ul>
              </div>
              <div class="bg-yellow-50 p-4 rounded-lg">
                <h4 class="font-semibold text-yellow-900 mb-2">Bellman-Ford Algorithm</h4>
                <p class="text-yellow-800 text-sm mb-2">Handles negative weights and detects negative cycles</p>
                <div class="complexity-badge text-xs">O(VE)</div>
                <ul class="text-yellow-700 text-xs mt-2 space-y-1">
                  <li>• Relaxes edges repeatedly</li>
                  <li>• Robust but slower</li>
                  <li>• Can detect negative cycles</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Floyd-Warshall Algorithm</h4>
                <p class="text-purple-800 text-sm mb-2">All-pairs shortest paths</p>
                <div class="complexity-badge text-xs">O(V³)</div>
                <ul class="text-purple-700 text-xs mt-2 space-y-1">
                  <li>• Dynamic programming approach</li>
                  <li>• Handles positive and negative weights</li>
                  <li>• Simple implementation</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">A* Search Algorithm</h4>
                <p class="text-green-800 text-sm mb-2">Heuristic-based search for pathfinding</p>
                <div class="complexity-badge text-xs">O(b^d)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Uses heuristic function</li>
                  <li>• Optimal with admissible heuristic</li>
                  <li>• Efficient in practice</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="mst" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">3.3 Minimum Spanning Tree (MST)</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              A <strong>Minimum Spanning Tree (MST)</strong> of a connected, undirected, weighted graph is a subset of the edges that connects all the vertices together, without any cycles and with the minimum possible total edge weight.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Kruskal's Algorithm</h4>
                <p class="text-blue-800 text-sm mb-3">Sorts all edges and adds the next lightest edge that doesn't form a cycle</p>
                <div class="complexity-badge text-xs">O(E log E)</div>
                <div class="mt-3">
                  <h5 class="font-semibold text-blue-900 text-sm mb-1">Key Features:</h5>
                  <ul class="text-blue-700 text-xs space-y-1">
                    <li>• Uses Disjoint Set Union (DSU) data structure</li>
                    <li>• Efficient for sparse graphs</li>
                    <li>• Simple to implement</li>
                  </ul>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Prim's Algorithm</h4>
                <p class="text-green-800 text-sm mb-3">Grows the MST one edge at a time from an arbitrary starting vertex</p>
                <div class="complexity-badge text-xs">O((V+E) log V)</div>
                <div class="mt-3">
                  <h5 class="font-semibold text-green-900 text-sm mb-1">Key Features:</h5>
                  <ul class="text-green-700 text-xs space-y-1">
                    <li>• Uses priority queue (min-heap)</li>
                    <li>• Similar to Dijkstra's algorithm</li>
                    <li>• Efficient for dense graphs</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="mt-4">
              <h4 class="font-semibold mb-2">Applications of MST:</h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-network-wired text-2xl text-blue-600 mb-2"></i>
                  <div class="font-semibold text-sm">Network Design</div>
                </div>
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-route text-2xl text-green-600 mb-2"></i>
                  <div class="font-semibold text-sm">Transportation</div>
                </div>
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-microchip text-2xl text-purple-600 mb-2"></i>
                  <div class="font-semibold text-sm">VLSI Design</div>
                </div>
              </div>
            </div>
          </div>

          <div id="topological-sort" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">3.4 Topological Sort</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              A <strong>Topological Sort</strong> of a Directed Acyclic Graph (DAG) is a linear ordering of its vertices such that for every directed edge (u, v), vertex u comes before vertex v in the ordering.
            </p>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="fas fa-info-circle text-yellow-400"></i>
                </div>
                <div class="ml-3">
                  <p class="text-sm text-yellow-700">
                    <strong>Note:</strong> Topological sorting is only possible for DAGs. If a graph contains a cycle, no topological ordering exists.
                  </p>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">DFS-Based Approach</h4>
                <p class="text-blue-800 text-sm mb-2">Performs DFS and adds vertices to the front of a list as they are finished</p>
                <div class="complexity-badge text-xs">O(V + E)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Recursive or iterative implementation</li>
                  <li>• Uses a stack</li>
                  <li>• Most common approach</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Kahn's Algorithm</h4>
                <p class="text-green-800 text-sm mb-2">Repeatedly finds vertices with in-degree zero and removes them</p>
                <div class="complexity-badge text-xs">O(V + E)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Iterative approach</li>
                  <li>• Uses a queue</li>
                  <li>• Can detect cycles</li>
                </ul>
              </div>
            </div>

            <div class="mt-4">
              <h4 class="font-semibold mb-2">Applications:</h4>
              <ul class="list-disc list-inside space-y-1 text-gray-700 text-sm">
                <li><strong>Scheduling tasks</strong> with dependencies (course prerequisites, build systems)</li>
                <li><strong>Event scheduling</strong> where some events must precede others</li>
                <li><strong>Instruction scheduling</strong> in compiler design</li>
                <li><strong>Pipeline systems</strong> in manufacturing</li>
              </ul>
            </div>
          </div>
        </section>

        <!-- Arrays & Strings Section -->
        <section id="arrays">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">4. Techniques for Arrays, Strings & Sequences</h2>
            <p class="text-gray-600">Common patterns for solving problems on linear data structures</p>
          </div>

          <div id="two-pointers" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.1 Two Pointers</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              The <strong>Two Pointers technique</strong> uses two pointers (indices) to traverse a data structure. These pointers can move in the same direction, opposite directions, or at different speeds.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Same Direction</h4>
                <p class="text-blue-800 text-sm mb-2">Both pointers move left to right</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Remove duplicates</li>
                  <li>• Partition arrays</li>
                  <li>• Sliding window</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Opposite Directions</h4>
                <p class="text-green-800 text-sm mb-2">One from left, one from right</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Pair sum problems</li>
                  <li>• Palindrome checking</li>
                  <li>• Reversing arrays</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Different Speeds</h4>
                <p class="text-purple-800 text-sm mb-2">Slow and fast pointers</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-purple-700 text-xs mt-2 space-y-1">
                  <li>• Cycle detection</li>
                  <li>• Middle element</li>
                  <li>• Linked list problems</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="sliding-window" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.2 Sliding Window</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              The <strong>Sliding Window technique</strong> maintains a "window" (contiguous sequence of elements) within an array or string that efficiently slides from one end to the other.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Fixed Size Window</h4>
                <p class="text-blue-800 text-sm mb-2">Window maintains a constant size as it slides</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Maximum sum of subarray of size k</li>
                  <li>• Average of subarrays</li>
                  <li>• Pattern matching</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Variable Size Window</h4>
                <p class="text-green-800 text-sm mb-2">Window expands or contracts based on conditions</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Longest substring with k distinct chars</li>
                  <li>• Smallest subarray with sum ≥ target</li>
                  <li>• Minimum window substring</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="prefix-sums" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.3 Prefix/Suffix Sums</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Prefix Sum</strong> technique involves pre-computing an auxiliary array where each element at index `i` holds the sum of all elements from the beginning up to index `i`.
            </p>

            <div class="bg-blue-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-blue-900 mb-2">Key Formula:</h4>
              <div class="bg-white p-2 rounded font-mono text-sm">
                prefix_sum[i] = prefix_sum[i-1] + arr[i]
              </div>
              <div class="mt-2 text-blue-800 text-sm">
                Range sum query: sum(arr[i..j]) = prefix_sum[j] - prefix_sum[i-1]
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Applications</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Range sum queries in O(1) time</li>
                  <li>• Finding equilibrium index</li>
                  <li>• Calculating submatrix sums (2D prefix sums)</li>
                  <li>• Cumulative frequency calculations</li>
                </ul>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Extensions</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Suffix sums (sum from index to end)</li>
                  <li>• Difference arrays (for range updates)</li>
                  <li>• 2D prefix sums (for matrices)</li>
                  <li>• Fenwick Trees (for dynamic arrays)</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="kadane" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.4 Kadane's Algorithm</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Kadane's Algorithm</strong> is an efficient O(n) algorithm for finding the <strong>maximum sum of a contiguous subarray</strong> within a one-dimensional array of numbers.
            </p>

            <div class="bg-green-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-green-900 mb-2">Algorithm Steps:</h4>
              <ol class="list-decimal list-inside text-green-800 text-sm space-y-1">
                <li>Initialize
                  <code>current_sum</code> and
                  <code>max_sum</code> to the first element
                </li>
                <li>For each subsequent element:
                  <ul class="list-disc list-inside ml-4">
                    <li>Update
                      <code>current_sum = max(current_element, current_sum + current_element)</code>
                    </li>
                    <li>Update
                      <code>max_sum = max(max_sum, current_sum)</code>
                    </li>
                  </ul>
                </li>
              </ol>
            </div>

            <div class="complexity-badge mb-4">O(n) time | O(1) space</div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Variations</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Find indices of maximum subarray</li>
                  <li>• Minimum sum subarray</li>
                  <li>• Maximum product subarray</li>
                  <li>• Circular array maximum sum</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Applications</h4>
                <ul class="text-purple-800 space-y-1 text-sm">
                  <li>• Stock price analysis</li>
                  <li>• Signal processing</li>
                  <li>• Computer vision</li>
                  <li>• Bioinformatics</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="monotonic" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.5 Monotonic Stack/Queue</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              A <strong>Monotonic Stack or Queue</strong> is a data structure whose elements are always kept in a <strong>sorted (monotonically increasing or decreasing) order</strong>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Monotonic Stack</h4>
                <p class="text-blue-800 text-sm mb-2">Elements maintained in sorted order</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Next Greater Element</li>
                  <li>• Previous Smaller Element</li>
                  <li>• Largest Rectangle in Histogram</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Monotonic Queue</h4>
                <p class="text-green-800 text-sm mb-2">Sliding window minimum/maximum</p>
                <div class="complexity-badge text-xs">O(n)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Sliding window maximum</li>
                  <li>• Range minimum queries</li>
                  <li>• Optimized DP transitions</li>
                </ul>
              </div>
            </div>

            <div class="pullquote">
              "Monotonic structures maintain order by removing elements that would violate the sorted property before adding new elements, enabling efficient range queries."
            </div>
          </div>

          <div id="rolling-hash" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.6 Rolling Hash (Rabin-Karp)</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              The <strong>Rolling Hash (Rabin-Karp) algorithm</strong> uses hashing to find patterns in text by efficiently computing hash values of successive substrings.
            </p>

            <div class="bg-purple-50 p-4 rounded-lg mb-4">
              <h4 class="font-semibold text-purple-900 mb-2">Key Advantages:</h4>
              <ul class="text-purple-800 space-y-1 text-sm">
                <li>• Efficient hash updates in O(1) time</li>
                <li>• Avoids recomputing hashes from scratch</li>
                <li>• Polynomial hash functions with modular arithmetic</li>
                <li>• Handles multiple pattern matching</li>
              </ul>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Time Complexity</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Average case: <span class="complexity-badge text-xs">O(n+m)</span>
                  </li>
                  <li>• Worst case: <span class="complexity-badge text-xs">O(nm)</span></li>
                  <li>• Preprocessing: <span class="complexity-badge text-xs">O(m)</span></li>
                  <li>• Space: <span class="complexity-badge text-xs">O(1)</span></li>
                </ul>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Applications</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• String matching (pattern search)</li>
                  <li>• Longest common substring</li>
                  <li>• Plagiarism detection</li>
                  <li>• Bioinformatics (DNA sequencing)</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="string-matching" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">4.7 String Matching</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>String matching algorithms</strong> find occurrences of a pattern string within a larger text string, crucial for text processing, search engines, and bioinformatics.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Knuth-Morris-Pratt (KMP)</h4>
                <p class="text-blue-800 text-sm mb-2">Uses LPS array to avoid rechecking characters</p>
                <div class="complexity-badge text-xs">O(n+m)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Preprocesses pattern to create LPS array</li>
                  <li>• Avoids backtracking in text</li>
                  <li>• Optimal for small alphabets</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Z-Algorithm</h4>
                <p class="text-green-800 text-sm mb-2">Constructs Z-array for pattern matching</p>
                <div class="complexity-badge text-xs">O(n+m)</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Z[i] = length of longest prefix match</li>
                  <li>• Uses "Z-box" optimization</li>
                  <li>• Simple implementation</li>
                </ul>
              </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-yellow-50 p-4 rounded-lg">
                <h4 class="font-semibold text-yellow-900 mb-2">Boyer-Moore</h4>
                <p class="text-yellow-800 text-sm mb-2">Often fastest in practice</p>
                <div class="complexity-badge text-xs">O(n/m)</div>
                <ul class="text-yellow-700 text-xs mt-2 space-y-1">
                  <li>• Bad character heuristic</li>
                  <li>• Good suffix rule</li>
                  <li>• Skips sections of text</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Aho-Corasick</h4>
                <p class="text-purple-800 text-sm mb-2">Multiple pattern matching</p>
                <div class="complexity-badge text-xs">O(n+m+k)</div>
                <ul class="text-purple-700 text-xs mt-2 space-y-1">
                  <li>• All occurrences of multiple patterns</li>
                  <li>• Uses trie with failure links</li>
                  <li>• Efficient for dictionary matching</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <!-- Advanced Data Structures Section -->
        <section id="advanced">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">5. Advanced Data Structures & Amortized Analysis</h2>
            <p class="text-gray-600">Sophisticated data structures and analysis techniques for optimized performance</p>
          </div>

          <div id="amortized" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">5.1 Amortized Analysis</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Amortized analysis</strong> evaluates the average-case time complexity of algorithms involving a sequence of operations where some operations may be significantly more expensive than others <a href="https://cs.gmu.edu/~ashehu/sites/default/files/cs483/Shehu_CS483_AmortizedAnalysis.pdf" class="citation" target="_blank">[700]</a>.
            </p>

            <div class="pullquote">
              "The core idea is to 'spread' the cost of infrequent, expensive operations over a series of more common, cheaper operations, ensuring that the average cost per operation remains low."
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Aggregate Method</h4>
                <p class="text-blue-800 text-sm mb-2">Total cost divided by number of operations</p>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Simple and straightforward</li>
                  <li>• Provides upper bound</li>
                  <li>• Example: Binary counter analysis</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Accounting Method</h4>
                <p class="text-green-800 text-sm mb-2">Assigns amortized costs with credit system</p>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• "Banker's method"</li>
                  <li>• Excess credit pays for future operations</li>
                  <li>• Example: Dynamic table insertion</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Potential Method</h4>
                <p class="text-purple-800 text-sm mb-2">Uses potential function to measure stored energy</p>
                <ul class="text-purple-700 text-xs mt-2 space-y-1">
                  <li>• Most sophisticated approach</li>
                  <li>• General and powerful</li>
                  <li>• Example: Stack operations</li>
                </ul>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Applications:</h4>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Data Structures</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Dynamic arrays (vector)</li>
                  <li>• Hash tables with resizing</li>
                  <li>• Disjoint-set union (DSU)</li>
                  <li>• Fibonacci heaps</li>
                  <li>• Splay trees</li>
                </ul>
              </div>
              <div class="bg-gray-50 p-4 rounded-lg">
                <h4 class="font-semibold mb-2">Algorithm Operations</h4>
                <ul class="space-y-1 text-sm text-gray-700">
                  <li>• Incrementing binary counters</li>
                  <li>• Multipop stack operations</li>
                  <li>• Graph algorithm operations</li>
                  <li>• Union-find operations</li>
                  <li>• Priority queue operations</li>
                </ul>
              </div>
            </div>
          </div>

          <div id="fibonacci-heap" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">5.2 Fibonacci Heaps</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Fibonacci Heaps</strong> are a sophisticated data structure for implementing priority queues, offering superior amortized time complexities for key operations <a href="https://www.geeksforgeeks.org/dsa/fibonacci-heap-set-1-introduction/" class="citation" target="_blank">[197]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Structure Properties</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Collection of min-heap-ordered trees</li>
                  <li>• Trees can have any shape</li>
                  <li>• Not necessarily balanced</li>
                  <li>• Pointer to minimum element</li>
                  <li>• Circular doubly linked lists for children</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Key Features</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• <strong>Lazy consolidation:</strong> Defers merging of trees</li>
                  <li>• <strong>Cascading cut:</strong> Maintains efficiency after decrease-key</li>
                  <li>• <strong>Marked nodes:</strong> Track nodes that lost children</li>
                  <li>• Named after Fibonacci sequence properties</li>
                </ul>
              </div>
            </div>

            <div class="mermaid-title">Fibonacci Heap Operations</div>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph TD
                A["Fibonacci Heap"] --> B["Insert
                <br />O(1)"]
                A --> C["Find-Min
                <br />O(1)"]
                A --> D["Merge
                <br />O(1)"]
                A --> E["Decrease-Key
                <br />O(1)"]
                A --> F["Extract-Min
                <br />O(log n)"]
                E --> G["Cascading Cut"]
                F --> H["Consolidation"]
              </div>
            </div>

            <div class="mt-4">
              <h4 class="font-semibold mb-2">Applications:</h4>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-route text-2xl text-blue-600 mb-2"></i>
                  <div class="font-semibold text-sm">Dijkstra's Algorithm</div>
                  <div class="text-xs text-gray-600">O(V log V + E)</div>
                </div>
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-network-wired text-2xl text-green-600 mb-2"></i>
                  <div class="font-semibold text-sm">Prim's Algorithm</div>
                  <div class="text-xs text-gray-600">O(E + V log V)</div>
                </div>
                <div class="bg-gray-100 p-3 rounded text-center">
                  <i class="fas fa-code-branch text-2xl text-purple-600 mb-2"></i>
                  <div class="font-semibold text-sm">Branch & Bound</div>
                  <div class="text-xs text-gray-600">Optimization</div>
                </div>
              </div>
            </div>
          </div>

          <div id="splay-trees" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">5.3 Splay Trees</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Splay Trees</strong> are self-adjusting binary search trees that offer excellent amortized performance through the "splay" operation, which moves recently accessed nodes to the root <a href="https://www.cs.cmu.edu/~sleator/papers/self-adjusting.pdf" class="citation" target="_blank">[163]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Splaying Operations</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Zig (or Zag)</h5>
                    <p class="text-blue-800 text-xs">Single rotation when node is child of root</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Zig-Zig</h5>
                    <p class="text-blue-800 text-xs">Two rotations when node and parent are both left/right children</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Zig-Zag</h5>
                    <p class="text-blue-800 text-xs">Two rotations when node and parent are opposite children</p>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Key Properties</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• <strong>Locality of reference:</strong> Frequently accessed items move closer to root</li>
                  <li>• No balance information stored</li>
                  <li>• Simpler node structure than AVL/RB trees</li>
                  <li>• Amortized O(log n) per operation</li>
                  <li>• Individual operations can be O(n)</li>
                </ul>
              </div>
            </div>

            <div class="pullquote">
              "The dynamic optimality conjecture posits that splay trees are as asymptotically efficient as any other binary search tree algorithm, up to a constant factor, for any sequence of operations."
            </div>
          </div>

          <div id="fenwick" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">5.4 Fenwick Trees (Binary Indexed Trees)</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              A <strong>Fenwick Tree</strong>, or <strong>Binary Indexed Tree (BIT)</strong>, provides efficient calculation of prefix sums and updates in O(log n) time <a href="https://husterxsp.github.io/2017/06/06/binary-indexed-tree/" class="citation" target="_blank">[561]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Operations</h4>
                <div class="space-y-3">
                  <div>
                    <h5 class="font-semibold text-blue-900 text-sm mb-1">Prefix Sum Query</h5>
                    <p class="text-blue-800 text-xs">Sum from beginning to index i</p>
                    <div class="complexity-badge text-xs">O(log n)</div>
                  </div>
                  <div>
                    <h5 class="font-semibold text-blue-900 text-sm mb-1">Point Update</h5>
                    <p class="text-blue-800 text-xs">Add delta to element at index i</p>
                    <div class="complexity-badge text-xs">O(log n)</div>
                  </div>
                  <div>
                    <h5 class="font-semibold text-blue-900 text-sm mb-1">Range Query</h5>
                    <p class="text-blue-800 text-xs">sum(R) - sum(L-1)</p>
                    <div class="complexity-badge text-xs">O(log n)</div>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Key Features</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Space efficient: O(n) space</li>
                  <li>• Simple implementation</li>
                  <li>• Faster than Segment Trees for prefix sums</li>
                  <li>• Uses LSB (Least Significant Bit) trick</li>
                  <li>• Range: i - LSB(i) + 1 to i</li>
                </ul>
              </div>
            </div>

            <div class="mermaid-title">Fenwick Tree Index Management</div>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph LR
                A["Index 1: 0001"] --> B["Covers 1"]
                C["Index 2: 0010"] --> D["Covers 1-2"]
                E["Index 3: 0011"] --> F["Covers 3"]
                G["Index 4: 0100"] --> H["Covers 1-4"]
                I["Index 5: 0101"] --> J["Covers 5"]
                K["Index 6: 0110"] --> L["Covers 5-6"]
                M["Index 7: 0111"] --> N["Covers 7"]
                O["Index 8: 1000"] --> P["Covers 1-8"]
              </div>
            </div>
          </div>

          <div id="segment-trees" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">5.5 Segment Trees</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Segment Trees</strong> are versatile data structures for efficiently answering range queries and performing range updates on arrays with O(log n) time complexity <a href="https://automationtestlab.com/segment-trees-data-structure-java/" class="citation" target="_blank">[765]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Structure</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Each node represents an interval</li>
                  <li>• Leaves represent single elements</li>
                  <li>• Internal nodes combine children's segments</li>
                  <li>• Typically array-based implementation</li>
                  <li>• Size: approximately 4*n</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Operations</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Build</h5>
                    <p class="text-green-800 text-xs">O(n) construction time</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Range Query</h5>
                    <p class="text-green-800 text-xs">O(log n) per query</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Point Update</h5>
                    <p class="text-green-800 text-xs">O(log n) per update</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Range Update</h5>
                    <p class="text-green-800 text-xs">O(log n) with lazy propagation</p>
                  </div>
                </div>
              </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="fas fa-lightbulb text-yellow-400"></i>
                </div>
                <div class="ml-3">
                  <p class="text-sm text-yellow-700">
                    <strong>Lazy Propagation:</strong> Defers updates by storing "lazy" values in nodes, propagating them only when necessary, enabling efficient range updates.
                  </p>
                </div>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Supported Operations:</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-calculator text-2xl text-blue-600 mb-2"></i>
                <div class="font-semibold text-sm">Sum/Product</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-arrows-alt-v text-2xl text-green-600 mb-2"></i>
                <div class="font-semibold text-sm">Min/Max</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-divide text-2xl text-purple-600 mb-2"></i>
                <div class="font-semibold text-sm">GCD/XOR</div>
              </div>
            </div>
          </div>
        </section>

        <!-- Advanced Techniques Section -->
        <section id="techniques">
          <div class="section-header">
            <h2 class="serif text-3xl font-bold text-gray-900 mb-2">6. Advanced Algorithmic Techniques</h2>
            <p class="text-gray-600">Sophisticated approaches for complex computational challenges</p>
          </div>

          <div id="approximation" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.1 Approximation Algorithms</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Approximation algorithms</strong> find near-optimal solutions for computationally hard problems, particularly NP-hard problems, with guaranteed performance ratios <a href="https://www.cs.cmu.edu/~15451-s23/lectures/lec18-approx.pdf" class="citation" target="_blank">[667]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Performance Guarantees</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Approximation Ratio (ρ)</h5>
                    <p class="text-blue-800 text-xs">For minimization: C/C* ≤ ρ(n)</p>
                    <p class="text-blue-800 text-xs">For maximization: C*/C ≤ ρ(n)</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">PTAS</h5>
                    <p class="text-blue-800 text-xs">Polynomial-Time Approximation Scheme</p>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">FPTAS</h5>
                    <p class="text-blue-800 text-xs">Fully Polynomial-Time Approximation Scheme</p>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Design Techniques</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Greedy algorithms (Set Cover, Vertex Cover)</li>
                  <li>• Local Search and Simulated Annealing</li>
                  <li>• LP Relaxation and Rounding</li>
                  <li>• Randomized Algorithms</li>
                  <li>• Primal-Dual Methods</li>
                </ul>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Classic Problems and Ratios:</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold text-sm">Traveling Salesman</div>
                <div class="text-xs text-gray-600">3/2-approximation (Christofides)</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold text-sm">Vertex Cover</div>
                <div class="text-xs text-gray-600">2-approximation</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <div class="font-semibold text-sm">Set Cover</div>
                <div class="text-xs text-gray-600">ln(n)-approximation</div>
              </div>
            </div>
          </div>

          <div id="randomized" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.2 Randomized Algorithms</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Randomized algorithms</strong> use randomness as part of their logic to achieve good performance in expectation or with high probability, often being simpler and more efficient than deterministic counterparts.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Las Vegas Algorithms</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Always produce correct answer</li>
                  <li>• Running time is random variable</li>
                  <li>• Goal: Small expected running time</li>
                  <li>• Example: Randomized QuickSort</li>
                  <li>• Expected: <span class="complexity-badge text-xs">O(n log n)</span></li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Monte Carlo Algorithms</h4>
                <ul class="text-green-800 space-y-1 text-sm">
                  <li>• Fixed running time</li>
                  <li>• May produce incorrect answer</li>
                  <li>• Probability of error can be controlled</li>
                  <li>• Example: Miller-Rabin primality test</li>
                  <li>• Can be repeated for better accuracy</li>
                </ul>
              </div>
            </div>

            <div class="pullquote">
              "The power of randomization lies in its ability to break symmetry, avoid worst-case inputs by making the algorithm's behavior input-independent in expectation, and explore large solution spaces efficiently."
            </div>

            <h4 class="font-semibold mb-2">Applications:</h4>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-shapes text-2xl text-blue-600 mb-2"></i>
                <div class="font-semibold text-sm">Computational Geometry</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-project-diagram text-2xl text-green-600 mb-2"></i>
                <div class="font-semibold text-sm">Graph Algorithms</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-calculator text-2xl text-purple-600 mb-2"></i>
                <div class="font-semibold text-sm">Number Theory</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-stream text-2xl text-yellow-600 mb-2"></i>
                <div class="font-semibold text-sm">Data Streams</div>
              </div>
            </div>
          </div>

          <div id="network-flow" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.3 Network Flow</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Network flow algorithms</strong> solve optimization problems on flow networks, which are directed graphs where each edge has a capacity and receives an amount of flow.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Maximum Flow</h4>
                <p class="text-blue-800 text-sm mb-2">Ford-Fulkerson method with augmenting paths</p>
                <div class="complexity-badge text-xs">O(E * max_flow)</div>
                <ul class="text-blue-700 text-xs mt-2 space-y-1">
                  <li>• Edmonds-Karp: <span class="complexity-badge text-xs">O(VE²)</span></li>
                  <li>• Dinic's: <span class="complexity-badge text-xs">O(V²E)</span></li>
                  <li>• Push-Relabel: <span class="complexity-badge text-xs">O(V²√E)</span></li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Minimum Cut</h4>
                <p class="text-green-800 text-sm mb-2">Max-Flow Min-Cut Theorem</p>
                <div class="complexity-badge text-xs">Same as max flow</div>
                <ul class="text-green-700 text-xs mt-2 space-y-1">
                  <li>• Value of max flow equals capacity of min cut</li>
                  <li>• Applications in network reliability</li>
                  <li>• Image segmentation</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Minimum Cost Flow</h4>
                <p class="text-purple-800 text-sm mb-2">Each edge has capacity and cost</p>
                <div class="complexity-badge text-xs">Varies</div>
                <ul class="text-purple-700 text-xs mt-2 space-y-1">
                  <li>• Find maximum flow with minimum cost</li>
                  <li>• Successive shortest paths</li>
                  <li>• Cycle canceling</li>
                </ul>
              </div>
            </div>

            <div class="mermaid-title">Network Flow Concepts</div>
            <div class="mermaid-container">
              <div class="mermaid-controls">
                <button class="mermaid-control-btn zoom-in" title="放大">
                  <i class="fas fa-search-plus"></i>
                </button>
                <button class="mermaid-control-btn zoom-out" title="缩小">
                  <i class="fas fa-search-minus"></i>
                </button>
                <button class="mermaid-control-btn reset-zoom" title="重置">
                  <i class="fas fa-expand-arrows-alt"></i>
                </button>
                <button class="mermaid-control-btn fullscreen" title="全屏查看">
                  <i class="fas fa-expand"></i>
                </button>
              </div>
              <div class="mermaid">
                graph LR
                A["Source s"] -->|"Capacity 10
                <br />Flow 7"| B["Node 1"]
                A -->|"Capacity 5
                <br />Flow 5"| C["Node 2"]
                B -->|"Capacity 8
                <br />Flow 4"| D["Node 3"]
                B -->|"Capacity 3
                <br />Flow 3"| E["Node 4"]
                C -->|"Capacity 4
                <br />Flow 3"| D
                C -->|"Capacity 6
                <br />Flow 2"| E
                D -->|"Capacity 7
                <br />Flow 7"| F["Sink t"]
                E -->|"Capacity 9
                <br />Flow 5"| F
              </div>
            </div>
          </div>

          <div id="mathematical" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.4 Mathematical Algorithms</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Mathematical algorithms</strong> solve problems rooted in mathematics, number theory, algebra, and numerical analysis, forming the foundation for cryptography and scientific computing.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Number Theory</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Primality Testing</h5>
                    <ul class="text-blue-800 text-xs space-y-1">
                      <li>• Miller-Rabin (probabilistic)</li>
                      <li>• AKS (deterministic)</li>
                    </ul>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">Integer Factorization</h5>
                    <ul class="text-blue-800 text-xs space-y-1">
                      <li>• Pollard's rho algorithm</li>
                      <li>• General Number Field Sieve</li>
                    </ul>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">GCD & Modular Arithmetic</h5>
                    <ul class="text-blue-800 text-xs space-y-1">
                      <li>• Euclidean algorithm</li>
                      <li>• Extended Euclidean algorithm</li>
                      <li>• Modular exponentiation</li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Numerical & Combinatorial</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Numerical Algorithms</h5>
                    <ul class="text-green-800 text-xs space-y-1">
                      <li>• Root finding (Newton's method)</li>
                      <li>• Numerical integration</li>
                      <li>• Linear equation solving</li>
                    </ul>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Combinatorial Algorithms</h5>
                    <ul class="text-green-800 text-xs space-y-1">
                      <li>• Generating permutations</li>
                      <li>• Counting problems</li>
                      <li>• Sieve algorithms</li>
                    </ul>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Sieve of Eratosthenes</h5>
                    <p class="text-green-800 text-xs">Efficient algorithm for finding all primes up to n</p>
                    <div class="complexity-badge text-xs">O(n log log n)</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="computational-geometry" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.5 Computational Geometry</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Computational geometry</strong> deals with the design and analysis of algorithms for solving geometric problems involving points, lines, polygons, and other geometric objects.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-2">Convex Hull</h4>
                <p class="text-blue-800 text-sm mb-2">Smallest convex polygon enclosing points</p>
                <ul class="text-blue-700 text-xs space-y-1">
                  <li>• Graham's scan: <span class="complexity-badge text-xs">O(n log n)</span></li>
                  <li>• Jarvis's march: <span class="complexity-badge text-xs">O(nh)</span></li>
                  <li>• QuickHull</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-2">Line Intersection</h4>
                <p class="text-green-800 text-sm mb-2">Find all intersection points</p>
                <ul class="text-green-700 text-xs space-y-1">
                  <li>• Bentley-Ottmann: <span class="complexity-badge text-xs">O((n+k) log n)</span></li>
                  <li>• Sweep line algorithm</li>
                  <li>• Applications in CAD</li>
                </ul>
              </div>
              <div class="bg-purple-50 p-4 rounded-lg">
                <h4 class="font-semibold text-purple-900 mb-2">Voronoi Diagrams</h4>
                <p class="text-purple-800 text-sm mb-2">Partitions plane into regions</p>
                <ul class="text-purple-700 text-xs space-y-1">
                  <li>• Fortune's algorithm: <span class="complexity-badge text-xs">O(n log n)</span></li>
                  <li>• Delaunay triangulation (dual)</li>
                  <li>• Applications in GIS</li>
                </ul>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Applications:</h4>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-desktop text-2xl text-blue-600 mb-2"></i>
                <div class="font-semibold text-sm">Computer Graphics</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-robot text-2xl text-green-600 mb-2"></i>
                <div class="font-semibold text-sm">Robotics</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-map text-2xl text-purple-600 mb-2"></i>
                <div class="font-semibold text-sm">GIS</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-microchip text-2xl text-yellow-600 mb-2"></i>
                <div class="font-semibold text-sm">VLSI Design</div>
              </div>
            </div>
          </div>

          <div id="advanced-dp" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.6 Advanced Dynamic Programming Techniques</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              Advanced DP techniques build upon the foundation of overlapping subproblems and optimal substructure to solve more complex problems through sophisticated state definitions and optimizations.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Advanced Techniques</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">DP with Bitmasks</h5>
                    <p class="text-blue-800 text-xs">Represent subsets using bitmask integers</p>
                    <div class="text-xs text-blue-700">Example: TSP, Assignment problems</div>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">DP on Trees</h5>
                    <p class="text-blue-800 text-xs">States based on subtrees rooted at nodes</p>
                    <div class="text-xs text-blue-700">Example: Maximum independent set</div>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-blue-900 text-sm">DP on Graphs (DAGs)</h5>
                    <p class="text-blue-800 text-xs">Compute in topological order</p>
                    <div class="text-xs text-blue-700">Example: Longest path, Counting paths</div>
                  </div>
                </div>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Optimization Techniques</h4>
                <div class="space-y-2">
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Data Structure Optimization</h5>
                    <p class="text-green-800 text-xs">Use Segment Trees, Fenwick Trees</p>
                    <div class="text-xs text-green-700">Optimize transitions from O(n) to O(log n)</div>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Convex Hull Trick (CHT)</h5>
                    <p class="text-green-800 text-xs">Optimize DP transitions with specific forms</p>
                    <div class="text-xs text-green-700">Maintain upper/lower envelope of lines</div>
                  </div>
                  <div class="bg-white p-2 rounded">
                    <h5 class="font-semibold text-green-900 text-sm">Divide & Conquer Optimization</h5>
                    <p class="text-green-800 text-xs">For DP with certain cost function properties</p>
                    <div class="text-xs text-green-700">Example: Knuth's optimization</div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div id="mos-algorithm" class="algorithm-card">
            <h3 class="serif text-2xl font-semibold mb-4 text-gray-900">6.7 Mo's Algorithm</h3>
            <p class="text-gray-700 leading-relaxed mb-4">
              <strong>Mo's Algorithm</strong>, or <strong>Query Square Root Decomposition</strong>, is an offline algorithm for efficiently processing range queries on static arrays <a href="https://cp-algorithms.com/data_structures/sqrt_decomposition.html" class="citation" target="_blank">[439]</a>.
            </p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-4">
              <div class="bg-blue-50 p-4 rounded-lg">
                <h4 class="font-semibold text-blue-900 mb-3">Key Ideas</h4>
                <ul class="text-blue-800 space-y-1 text-sm">
                  <li>• Offline processing of queries</li>
                  <li>• Sort queries in specific order</li>
                  <li>• Minimize transitions between queries</li>
                  <li>• Divide array into √N blocks</li>
                  <li>• "Elegant brute force" approach</li>
                </ul>
              </div>
              <div class="bg-green-50 p-4 rounded-lg">
                <h4 class="font-semibold text-green-900 mb-3">Complexity Analysis</h4>
                <div class="space-y-2">
                  <div>
                    <h5 class="font-semibold text-green-900 text-sm">Left Pointer</h5>
                    <p class="text-green-800 text-xs">Moves O(Q * √N) times</p>
                  </div>
                  <div>
                    <h5 class="font-semibold text-green-900 text-sm">Right Pointer</h5>
                    <p class="text-green-800 text-xs">Moves O(N * √N) times</p>
                  </div>
                  <div>
                    <h5 class="font-semibold text-green-900 text-sm">Overall</h5>
                    <p class="text-green-800 text-xs">O((N+Q)√N * F + Q log Q)</p>
                    <div class="text-xs text-green-700">Where F is add/remove complexity</div>
                  </div>
                </div>
              </div>
            </div>

            <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4">
              <div class="flex">
                <div class="flex-shrink-0">
                  <i class="fas fa-lightbulb text-yellow-400"></i>
                </div>
                <div class="ml-3">
                  <p class="text-sm text-yellow-700">
                    <strong>Tip:</strong> Mo's algorithm works best when the answer for range [L, R] can be efficiently computed from [L, R+1], [L+1, R], [L-1, R], and [L, R-1].
                  </p>
                </div>
              </div>
            </div>

            <h4 class="font-semibold mb-2">Applications:</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-3">
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-hashtag text-2xl text-blue-600 mb-2"></i>
                <div class="font-semibold text-sm">Distinct Elements</div>
                <div class="text-xs text-gray-600">Count unique elements in range</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-calculator text-2xl text-green-600 mb-2"></i>
                <div class="font-semibold text-sm">Frequency Queries</div>
                <div class="text-xs text-gray-600">Count element frequencies</div>
              </div>
              <div class="bg-gray-100 p-3 rounded text-center">
                <i class="fas fa-tree text-2xl text-purple-600 mb-2"></i>
                <div class="font-semibold text-sm">Tree Queries</div>
                <div class="text-xs text-gray-600">Extended to tree structures</div>
              </div>
            </div>
          </div>
        </section>
      </div>
    </main>

    <div id="toc-overlay" class="toc-overlay"></div>
    <button id="toc-toggle" class="toc-toggle">
      <i class="fas fa-bars"></i> Menu
    </button>

    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'base',
            themeVariables: {
                primaryColor: '#f8fafc',
                primaryTextColor: '#1f2937',
                primaryBorderColor: '#1e3a5f',
                lineColor: '#4a90a4',
                secondaryColor: '#ffffff',
                tertiaryColor: '#f1f5f9',
                background: '#ffffff',
                mainBkg: '#ffffff',
                secondBkg: '#f8fafc',
                tertiaryBkg: '#f1f5f9',
                nodeBorder: '#1e3a5f',
                clusterBkg: '#f8fafc',
                clusterBorder: '#4a90a4',
                defaultLinkColor: '#4a90a4',
                titleColor: '#1f2937',
                edgeLabelBackground: '#ffffff',
                nodeTextColor: '#1f2937'
            },
            flowchart: {
                htmlLabels: true,
                curve: 'basis',
                padding: 20,
                nodeSpacing: 50,
                rankSpacing: 80,
                diagramPadding: 20
            },
            graph: {
                htmlLabels: true,
                curve: 'basis'
            },
            sequence: {
                diagramMarginX: 50,
                diagramMarginY: 10,
                actorMargin: 50,
                width: 150,
                height: 65,
                boxMargin: 10,
                boxTextMargin: 5,
                noteMargin: 10,
                messageMargin: 35
            }
        });
        
        // Initialize Mermaid Controls for zoom and pan
        function initializeMermaidControls() {
            const containers = document.querySelectorAll('.mermaid-container');

            containers.forEach(container => {
            const mermaidElement = container.querySelector('.mermaid');
            let scale = 1;
            let isDragging = false;
            let startX, startY, translateX = 0, translateY = 0;

            // 触摸相关状态
            let isTouch = false;
            let touchStartTime = 0;
            let initialDistance = 0;
            let initialScale = 1;
            let isPinching = false;

            // Zoom controls
            const zoomInBtn = container.querySelector('.zoom-in');
            const zoomOutBtn = container.querySelector('.zoom-out');
            const resetBtn = container.querySelector('.reset-zoom');
            const fullscreenBtn = container.querySelector('.fullscreen');

            function updateTransform() {
                mermaidElement.style.transform = `translate(${translateX}px, ${translateY}px) scale(${scale})`;

                if (scale > 1) {
                container.classList.add('zoomed');
                } else {
                container.classList.remove('zoomed');
                }

                mermaidElement.style.cursor = isDragging ? 'grabbing' : 'grab';
            }

            if (zoomInBtn) {
                zoomInBtn.addEventListener('click', () => {
                scale = Math.min(scale * 1.25, 4);
                updateTransform();
                });
            }

            if (zoomOutBtn) {
                zoomOutBtn.addEventListener('click', () => {
                scale = Math.max(scale / 1.25, 0.3);
                if (scale <= 1) {
                    translateX = 0;
                    translateY = 0;
                }
                updateTransform();
                });
            }

            if (resetBtn) {
                resetBtn.addEventListener('click', () => {
                scale = 1;
                translateX = 0;
                translateY = 0;
                updateTransform();
                });
            }

            if (fullscreenBtn) {
                fullscreenBtn.addEventListener('click', () => {
                if (container.requestFullscreen) {
                    container.requestFullscreen();
                } else if (container.webkitRequestFullscreen) {
                    container.webkitRequestFullscreen();
                } else if (container.msRequestFullscreen) {
                    container.msRequestFullscreen();
                }
                });
            }

            // Mouse Events
            mermaidElement.addEventListener('mousedown', (e) => {
                if (isTouch) return; // 如果是触摸设备，忽略鼠标事件

                isDragging = true;
                startX = e.clientX - translateX;
                startY = e.clientY - translateY;
                mermaidElement.style.cursor = 'grabbing';
                updateTransform();
                e.preventDefault();
            });

            document.addEventListener('mousemove', (e) => {
                if (isDragging && !isTouch) {
                translateX = e.clientX - startX;
                translateY = e.clientY - startY;
                updateTransform();
                }
            });

            document.addEventListener('mouseup', () => {
                if (isDragging && !isTouch) {
                isDragging = false;
                mermaidElement.style.cursor = 'grab';
                updateTransform();
                }
            });

            document.addEventListener('mouseleave', () => {
                if (isDragging && !isTouch) {
                isDragging = false;
                mermaidElement.style.cursor = 'grab';
                updateTransform();
                }
            });

            // 获取两点之间的距离
            function getTouchDistance(touch1, touch2) {
                return Math.hypot(
                touch2.clientX - touch1.clientX,
                touch2.clientY - touch1.clientY
                );
            }

            // Touch Events - 触摸事件处理
            mermaidElement.addEventListener('touchstart', (e) => {
                isTouch = true;
                touchStartTime = Date.now();

                if (e.touches.length === 1) {
                // 单指拖动
                isPinching = false;
                isDragging = true;

                const touch = e.touches[0];
                startX = touch.clientX - translateX;
                startY = touch.clientY - translateY;

                } else if (e.touches.length === 2) {
                // 双指缩放
                isPinching = true;
                isDragging = false;

                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                initialDistance = getTouchDistance(touch1, touch2);
                initialScale = scale;
                }

                e.preventDefault();
            }, { passive: false });

            mermaidElement.addEventListener('touchmove', (e) => {
                if (e.touches.length === 1 && isDragging && !isPinching) {
                // 单指拖动
                const touch = e.touches[0];
                translateX = touch.clientX - startX;
                translateY = touch.clientY - startY;
                updateTransform();

                } else if (e.touches.length === 2 && isPinching) {
                // 双指缩放
                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                const currentDistance = getTouchDistance(touch1, touch2);

                if (initialDistance > 0) {
                    const newScale = Math.min(Math.max(
                    initialScale * (currentDistance / initialDistance),
                    0.3
                    ), 4);
                    scale = newScale;
                    updateTransform();
                }
                }

                e.preventDefault();
            }, { passive: false });

            mermaidElement.addEventListener('touchend', (e) => {
                // 重置状态
                if (e.touches.length === 0) {
                isDragging = false;
                isPinching = false;
                initialDistance = 0;

                // 延迟重置isTouch，避免鼠标事件立即触发
                setTimeout(() => {
                    isTouch = false;
                }, 100);
                } else if (e.touches.length === 1 && isPinching) {
                // 从双指变为单指，切换为拖动模式
                isPinching = false;
                isDragging = true;

                const touch = e.touches[0];
                startX = touch.clientX - translateX;
                startY = touch.clientY - translateY;
                }

                updateTransform();
            });

            mermaidElement.addEventListener('touchcancel', (e) => {
                isDragging = false;
                isPinching = false;
                initialDistance = 0;

                setTimeout(() => {
                isTouch = false;
                }, 100);

                updateTransform();
            });

            // Enhanced wheel zoom with better center point handling
            container.addEventListener('wheel', (e) => {
                e.preventDefault();
                const rect = container.getBoundingClientRect();
                const centerX = rect.width / 2;
                const centerY = rect.height / 2;

                const delta = e.deltaY > 0 ? 0.9 : 1.1;
                const newScale = Math.min(Math.max(scale * delta, 0.3), 4);

                // Adjust translation to zoom towards center
                if (newScale !== scale) {
                const scaleDiff = newScale / scale;
                translateX = translateX * scaleDiff;
                translateY = translateY * scaleDiff;
                scale = newScale;

                if (scale <= 1) {
                    translateX = 0;
                    translateY = 0;
                }

                updateTransform();
                }
            });

            // Initialize display
            updateTransform();
            });
        }
        
        // Initialize after mermaid renders
        setTimeout(() => {
            initializeMermaidControls();
        }, 1000);
        
        // Table of Contents functionality
        const tocLinks = document.querySelectorAll('.toc-link');
        const sections = document.querySelectorAll('section, .algorithm-card');
        
        // Smooth scrolling for TOC links
        tocLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const targetId = link.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });
        
        // Update active TOC link based on scroll position
        function updateActiveTocLink() {
            let current = '';
            sections.forEach(section => {
                const sectionTop = section.offsetTop - 100;
                if (window.scrollY >= sectionTop) {
                    current = section.getAttribute('id');
                }
            });
            
            tocLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('href') === '#' + current) {
                    link.classList.add('active');
                }
            });
        }
        
        window.addEventListener('scroll', updateActiveTocLink);
        updateActiveTocLink(); // Initial call
        
        // Expandable sections functionality
        function toggleExpand(header) {
            const content = header.nextElementSibling;
            const icon = header.querySelector('i');
            
            content.classList.toggle('expanded');
            icon.classList.toggle('fa-chevron-down');
            icon.classList.toggle('fa-chevron-up');
        }
        
        // Mobile TOC toggle
        const tocToggle = document.getElementById('toc-toggle');
        const toc = document.querySelector('.toc');
        const tocOverlay = document.getElementById('toc-overlay');
        
        if (tocToggle) {
            tocToggle.addEventListener('click', () => {
                toc.classList.toggle('open');
                tocOverlay.classList.toggle('active');
            });
        }
        
        // Close TOC when clicking on overlay
        if (tocOverlay) {
            tocOverlay.addEventListener('click', () => {
                toc.classList.remove('open');
                tocOverlay.classList.remove('active');
            });
        }
        
        // Close TOC when clicking on a link (for mobile)
        tocLinks.forEach(link => {
            link.addEventListener('click', () => {
                if (window.innerWidth <= 768) {
                    toc.classList.remove('open');
                    tocOverlay.classList.remove('active');
                }
            });
        });
        
        // Close TOC when clicking outside (for mobile)
        document.addEventListener('click', (e) => {
            if (window.innerWidth <= 768 && 
                !toc.contains(e.target) && 
                !tocToggle.contains(e.target) &&
                !tocOverlay.contains(e.target)) {
                toc.classList.remove('open');
                tocOverlay.classList.remove('active');
            }
        });
        
        // Reset TOC state on window resize
        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                toc.classList.remove('open');
                tocOverlay.classList.remove('active');
            }
        });
    </script>
  </body>

</html>
